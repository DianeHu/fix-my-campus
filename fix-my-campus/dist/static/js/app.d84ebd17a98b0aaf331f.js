webpackJsonp([1],{"+4/V":function(e,t){e.exports=[{Department:"Parking and Transportation Services",Email:"tranpark@duke.edu",Phone:"919-684-PARK (7275)",Website:"https://parking.duke.edu/contact.php"},{Department:"Duke Innovation and Entrepreneurship",Email:"entrepreneurship@duke.edu",Phone:" 919-681-9165",Website:"https://entrepreneurship.duke.edu/"},{Department:"Central Campus HDRL",Email:"rlhs-central@studentaffairs.duke.edu",Phone:"919-684-5813",Website:"https://studentaffairs.duke.edu/hdrl/contact-us"},{Department:"East Campus HDRL",Email:"rlhs-east@studentaffairs.duke.edu",Phone:"919-684-5320",Website:"https://studentaffairs.duke.edu/hdrl/contact-us"},{Department:"West Campus HDRL",Email:"rlhs-west@studentaffairs.duke.edu",Phone:"919.684.5486",Website:"https://studentaffairs.duke.edu/hdrl/contact-us"},{Department:"Housing Assignments and Planning",Email:"housing@duke.edu",Phone:"919-684-4304",Website:"https://studentaffairs.duke.edu/hdrl/contact-us"},{Department:"Duke University Stores",Email:"N/A",Phone:"(919) 684-2065",Website:"https://www.dukestores.duke.edu/about/contact.php"},{Department:"Perkins and Bostock Libraries",Email:"perkins-requests@duke.edu",Phone:"(919) 660-5870",Website:"https://library.duke.edu/about/contact"},{Department:"Rubenstein Rare Boob & Manuscript Library",Email:"N/A",Phone:"(919) 660-5822",Website:"https://library.duke.edu/about/contact"},{Department:"Divinity School Library",Email:"divlib@duke.edu",Phone:"(919) 660-3450",Website:"https://library.duke.edu/about/contact"},{Department:"Ford Library, Fuqua School of Business",Email:"ford-library-circulation@fuqua.duke.edu",Phone:"(919) 660-7875",Website:"https://library.duke.edu/about/contact"},{Department:"Goodson Law Library",Email:"cir@law.duke.edu",Phone:"(919) 613-7128",Website:"https://library.duke.edu/about/contact"},{Department:"Library Service Center",Email:"lsc-requests@duke.edu",Phone:"(919) 613-6535",Website:"https://library.duke.edu/about/contact"},{Department:"Lilly Library",Email:"lilly-requests@duke.edu",Phone:"(919) 660-5995",Website:"https://library.duke.edu/about/contact"},{Department:"Duke Dining",Email:"dining@duke.edu",Phone:"919-660-3900",Website:"https://studentaffairs.duke.edu/dining/contact"},{Department:"Duke OIT",Email:"N/A",Phone:"919-684-2200",Website:"https://oit.duke.edu/help"},{Department:"Duke Vending and Concessions",Email:"N/A",Phone:"(919) 684-8363 ",Website:"https://www.dukestores.duke.edu/food/vending_contact.php"},{Department:"Duke University Facilities",Email:"N/A",Phone:"Multiple",Website:"https://fmd.duke.edu/about/contact/index.php"},{Department:"Duke Student Affairs",Email:"studentaffairs@duke.edu",Phone:"919.684.3737",Website:"https://studentaffairs.duke.edu/contact-us-student-affairs"},{Department:"Duke University Registrar",Email:"registrar@duke.edu",Phone:"919-684-2813",Website:"https://registrar.duke.edu/"},{Department:"Duke Student Health",Email:"N/A",Phone:"919-681-9355",Website:"https://studentaffairs.duke.edu/studenthealth/contact-us"}]},"+fzk":function(e,t){},"7zck":function(e,t){},"8++V":function(e,t){},"8Gmz":function(e,t){},ARFb:function(e,t){},EmOQ:function(e,t){},F546:function(e,t){},Gr3X:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),s=n("Sazm"),r=n.n(s),a=r.a.initializeApp({apiKey:"AIzaSyATUsYlp5G8zAMv1mZ-H7q3ATo2yH9Hp7I",authDomain:"fixmycampus-78290.firebaseapp.com",databaseURL:"https://fixmycampus-78290.firebaseio.com",projectId:"fixmycampus-78290",storageBucket:"fixmycampus-78290.appspot.com",messagingSenderId:"464047240260"}),o=a.database(),c=a.storage().ref(),l=o.ref("users"),u=o.ref("issues"),d=o.ref("comments"),v=o.ref("likes"),h=o.ref("tags"),f=o.ref("categories"),m=o.ref("categoryRequests"),p=o.ref("adminRequests"),g=o.ref("inbox"),_=o.ref("following"),k=o.ref("announcements"),b={data:function(){return{tempUserID:"",tempNetID:""}},firebase:{userReference:l},props:["dialog","user"],methods:{authenticateInformation:function(){this.checkDukeStudent(this.tempNetID,this.tempUserID)},checkDukeStudent:function(e,t){var n=this,i="https://streamer.oit.duke.edu/ldap/people/netid/"+e+"?access_token=512c70bd8a6cf54fae040bb6f6bb8ccc";fetch("https://cors-anywhere.herokuapp.com/"+i).then(function(e){return e.json()}).then(function(i){void 0!==i&&0!=i.length&&(i[0].duid==t&&i[0].netid==e.toLowerCase())?(l.push({name:n.user.name,isAdmin:!1}),n.tempUserID="",n.tempNetID=""):alert("Incorrect Duke ID or Net ID, please try again")}).catch(function(){return console.log("Access to "+i+" is still blocked.")})}}},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-text",[n("v-list",[n("v-text-field",{attrs:{name:"Duke ID",label:"Enter your DukeID"},model:{value:e.tempUserID,callback:function(t){e.tempUserID=t},expression:"tempUserID"}}),e._v(" "),n("v-text-field",{attrs:{name:"Net ID",label:"Enter your NetID"},model:{value:e.tempNetID,callback:function(t){e.tempNetID=t},expression:"tempNetID"}})],1)],1),e._v(" "),n("v-card-actions",[n("v-flex",{attrs:{"align-center":""}},[n("v-btn",{attrs:{dark:""},nativeOn:{click:function(t){e.authenticateInformation()}}},[e._v("\n        Submit\n      ")])],1)],1)],1)},staticRenderFns:[]};var w=n("VU/8")(b,y,!1,function(e){n("8Gmz")},null,null).exports,D=n("2ahc"),R=n.n(D),x=new R.a.auth.AuthUI(r.a.auth()),C={name:"login",data:function(){return{isShown:!1,dialog:!1}},firebase:{UserReference:l},props:["getUser","setUser"],components:{UserAuth:w},computed:{user:function(){return this.getUser()}},methods:{isRealAccount:function(){var e=this;return this.UserReference.filter(function(t){return t.name===e.user.name}).length>0},signInPopup:function(){var e=this;x.start("#firebaseui-auth-container",{signInFlow:"popup",credentialHelper:R.a.auth.CredentialHelper.NONE,signInOptions:[{provider:r.a.auth.EmailAuthProvider.PROVIDER_ID,requireDisplayName:!0}],callbacks:{signInSuccessWithAuthResult:function(t){return e.signIn(t.user),e.isShown=!1,!1},uiShown:function(){e.isShown=!0}}})},signIn:function(e){this.setUser({name:e.displayName,email:e.email,uid:e.uid,isAnonymous:e.isAnonymous})},signOut:function(){r.a.auth().signOut(),this.setUser(null)}},mounted:function(){var e=this;r.a.auth().onAuthStateChanged(function(t){t&&e.signIn(t)})}},T={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-toolbar",{attrs:{dark:""}},[n("v-toolbar-items",[n("v-btn",{attrs:{to:"/"}},[n("v-icon",[e._v("home")])],1)],1),e._v(" "),e.user?n("v-toolbar-title",[e._v(e._s(e.user.name))]):e._e(),e._v(" "),n("v-spacer"),e._v(" "),n("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[e.user?n("v-container",[n("v-btn",{attrs:{to:"/issues"}},[e._v("Issues")]),e._v(" "),n("v-btn",{attrs:{to:"/updates"}},[e._v("Updates")]),e._v(" "),this.isRealAccount()?n("v-btn",{attrs:{to:"/services"}},[e._v("Services")]):e._e(),e._v(" "),this.isRealAccount()?n("v-btn",{attrs:{to:"/inbox"}},[e._v("Inbox")]):e._e(),e._v(" "),n("v-btn",{attrs:{to:"/contact"}},[e._v("Contacts")]),e._v(" "),this.isRealAccount()?e._e():n("v-tooltip",{attrs:{bottom:""}},[n("v-icon",{attrs:{slot:"activator",color:"blue"},slot:"activator"},[e._v("info")]),e._v(" "),n("span",[e._v("It seems that your account is not yet authenticated!\n          "),n("br"),e._v("\n          Authenticated users can create, comment on, like, and follow issues.\n          "),n("br"),e._v("\n          Additionally, authenticated users can submit service requests.\n        ")])],1),e._v(" "),this.isRealAccount()?e._e():n("v-dialog",{attrs:{"max-width":"30%"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-btn",{attrs:{slot:"activator"},slot:"activator"},[e._v("Authenticate Account")]),e._v(" "),n("user-auth",{attrs:{dialog:e.dialog,user:e.user}})],1),e._v(" "),n("v-btn",{attrs:{flat:""},on:{click:e.signOut}},[n("a",[n("span",{staticClass:"glyphicon glyphicon-log-out"},[e._v("Logout")])])])],1):n("v-btn",{attrs:{flat:""},on:{click:e.signInPopup}},[n("a",[n("span",{staticClass:"glyphicon glyphicon-user"},[e._v("Sign In")])])]),e._v(" "),n("div",{class:{popup:e.isShown},attrs:{id:"firebaseui-auth-container"}})],1)],1)},staticRenderFns:[]};var A=n("VU/8")(C,T,!1,function(e){n("YYMA")},"data-v-73a89afc",null).exports,I={data:function(){return{user:null}},firebase:{issueReference:u},components:{login:A},methods:{getUser:function(){return this.user},setUser:function(e){this.user=e}},name:"App"},U={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",[t("div",[t("login",{attrs:{getUser:this.getUser,setUser:this.setUser}}),this._v(" "),t("router-view",{attrs:{person:this.user}})],1)])},staticRenderFns:[]};var q=n("VU/8")(I,U,!1,function(e){n("+fzk")},null,null).exports,F=n("/ocq"),E={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-jumbotron",{staticClass:"white--text",attrs:{src:"https://vuetifyjs.com/static/doc-images/parallax/material2.jpg",gradient:e.gradient,dark:""}},[n("v-container",{staticClass:"white--text",attrs:{"fill-height":""}},[n("v-layout",{attrs:{"align-center":""}},[n("v-flex",{staticClass:"heading",attrs:{"text-xs-center":""}},[n("h3",{staticClass:"display-3 white--text"},[e._v("Welcome to Fix My Campus")]),e._v(" "),n("span",{staticClass:"subheading white--text"},[e._v("A website dedicated to improving the quality of Duke University's campus through student filed issues and feedback.")])])],1)],1)],1),e._v(" "),n("br"),e._v(" "),n("v-flex",{staticClass:"infoDisplay"},[n("h2",{staticClass:"display-2"},[e._v("About")]),e._v(" "),n("span",{staticClass:"subheading"},[e._v("\n      This website was inspired by Duke's "),n("a",{attrs:{href:"https://www.facebook.com/groups/fixmycampus/"}},[e._v("Fix My Campus")]),e._v(" Facebook group.\n      In light of the fact that many people do not have Facebook accounts, and that many more may be leaving the site,\n      we decided that it may be wise to have a website entirely dedicated to posting issues about Duke's campus, and having\n      people contact the necessary Duke authorities to report these issues.\n    ")])]),e._v(" "),n("v-flex",{staticClass:"infoDisplay"},[n("h2",{staticClass:"display-2"},[e._v("Navigation")]),e._v(" "),n("span",{staticClass:"subheading"},[e._v("\n      To navigate through this page, simply traverse through the buttons in the navigation bar at the top of the page,\n      or go in the address bar to the links corresponding to the name of each button. We will discuss what each page of\n      the website does in further detail in the following sections.\n    ")])]),e._v(" "),n("v-flex",{staticClass:"infoDisplay"},[n("h2",{staticClass:"display-2"},[e._v("Issues")]),e._v(" "),n("span",{staticClass:"subheading"},[e._v("\n      The issues page is the meat and potatoes of the website. It is where you will go to submit issues to the general\n      public, interact with issues posted by other users (including liking, following, and commenting on issues). When\n      you submit an issue, you tag the issue with an Duke-specific category (i.e. HRL, Facilities, Dining, Student Health),\n      and may include a picture to clarify what the issue is. Issues at the top of this page are the ones that have been\n      submitted or commented on most recently.\n    ")])]),e._v(" "),n("v-flex",{staticClass:"infoDisplay"},[n("h2",{staticClass:"display-2"},[e._v("Updates")]),e._v(" "),n("span",{staticClass:"subheading"},[e._v("\n      On the updates page, you see updates that administrators post in response to user submitted issues. Keep in mind\n      that if your issue has not been resolved in one update, it may still come in future updates posted to this page.\n    ")])]),e._v(" "),n("v-flex",{staticClass:"infoDisplay"},[n("h2",{staticClass:"display-2"},[e._v("Services")]),e._v(" "),n("span",{staticClass:"subheading"},[e._v("\n      On the services page, you can request several special services from the administrators, including requesting a new\n      tag to add to posts, and requesting to be an administrator yourself.\n    ")])]),e._v(" "),n("v-flex",{staticClass:"infoDisplay"},[n("h2",{staticClass:"display-2"},[e._v("Inbox")]),e._v(" "),n("span",{staticClass:"subheading"},[e._v("\n      On the inbox page, you see any updates to requests that you made on the services page. If you are an administrator,\n      you see what requests have been made by who, and either approve or deny them.\n    ")])]),e._v(" "),n("v-flex",{staticClass:"infoDisplay"},[n("h2",{staticClass:"display-2"},[e._v("Contacts")]),e._v(" "),n("span",{staticClass:"subheading"},[e._v("\n      On the contacts page, you will see the contact information of the various offices and departments that the administrators\n      contact to resolve issues. Keep in mind that the administrators are simply students who are liasons for other students,\n      and in some cases it might be preferable to go straight to the source if the issue is urgent.\n    ")])])],1)},staticRenderFns:[]};var P=n("VU/8")({data:function(){return{gradient:"to top right, rgba(63,81,181, .7), rgba(25,32,72, .7)"}}},E,!1,function(e){n("F546")},null,null).exports,S=n("bOdI"),N=n.n(S),O=N()({firebase:{issueReference:u,tagReference:h,categoryReference:f},name:"tagger",props:["issueProp","newIssue"],computed:{},data:function(){return{newCategory:"",dialog:!1,checkbox:!0}},methods:{pushTempTag:function(e){h.push({id:e[".key"],owner:"temp"})},removeTempTag:function(e){var t=this.tagReference.filter(function(t){return t.id==e[".key"]&&"temp"==t.owner});h.child(t[0][".key"]).remove()},toggleTempTag:function(e){0!=this.tagReference.filter(function(t){return t.id==e[".key"]&&"temp"==t.owner}).length?this.removeTempTag(e):this.pushTempTag(e)},getTempSelected:function(e){return 0!=this.tagReference.filter(function(t){return t.id==e[".key"]&&"temp"==t.owner}).length},getSelected:function(e){var t=this;return 0!=this.tagReference.filter(function(n){return n.id==e[".key"]&&n.owner==t.issueProp[".key"]}).length},addNewCategory:function(){this.newCategory=this.newCategory.trim(),this.newCategory&&f.push({title:this.newCategory}),this.newCategory=""},tagIssue:function(e){h.push({id:e[".key"],owner:this.issueProp[".key"]})},untagIssue:function(e){var t=this,n=this.tagReference.filter(function(n){return n.id==e[".key"]&&n.owner==t.issueProp[".key"]});h.child(n[0][".key"]).remove()},toggleTag:function(e){var t=this;0!=this.tagReference.filter(function(n){return n.id==e[".key"]&&n.owner==t.issueProp[".key"]}).length?this.untagIssue(e):this.tagIssue(e)}}},"computed",{}),L={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.newIssue?n("div",[n("v-btn",{attrs:{dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("Tag issue")]),e._v(" "),n("v-dialog",{attrs:{persistent:"",scrollable:"","max-width":"300px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[e._v("Tag issue")]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",{staticStyle:{height:"300px"}},[n("v-container",{attrs:{fluid:""}},e._l(e.categoryReference,function(t){return n("v-list-tile",[e.getTempSelected(t)?n("v-list-tile-action",[n("v-btn",{attrs:{icon:""},on:{click:function(n){e.toggleTempTag(t)}}},[n("i",{staticClass:"icon grey--text text--darken-1 material-icons",attrs:{"aria-hidden":"true"}},[e._v("check_box")])])],1):e._e(),e._v(" "),e.getTempSelected(t)?e._e():n("v-list-tile-action",[n("v-btn",{attrs:{icon:""},on:{click:function(n){e.toggleTempTag(t)}}},[n("i",{staticClass:"icon grey--text text--darken-1 material-icons",attrs:{"aria-hidden":"true"}},[e._v("check_box_outline_blank")])])],1),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(t.title))])],1)],1)}))],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Save")])],1)],1)],1)],1):e._e(),e._v(" "),e.newIssue?e._e():n("div",[n("v-btn",{attrs:{dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("Tag issue")]),e._v(" "),n("v-dialog",{attrs:{persistent:"",scrollable:"","max-width":"300px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[e._v("Tag issue")]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",{staticStyle:{height:"300px"}},[n("v-container",{attrs:{fluid:""}},e._l(e.categoryReference,function(t){return n("v-list-tile",[e.getSelected(t)?n("v-list-tile-action",[n("v-btn",{attrs:{icon:""},on:{click:function(n){e.toggleTag(t)}}},[n("i",{staticClass:"icon grey--text text--darken-1 material-icons",attrs:{"aria-hidden":"true"}},[e._v("check_box")])])],1):e._e(),e._v(" "),e.getSelected(t)?e._e():n("v-list-tile-action",[n("v-btn",{attrs:{icon:""},on:{click:function(n){e.toggleTag(t)}}},[n("i",{staticClass:"icon grey--text text--darken-1 material-icons",attrs:{"aria-hidden":"true"}},[e._v("check_box_outline_blank")])])],1),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(t.title))])],1)],1)}))],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Save")])],1)],1)],1)],1)])},staticRenderFns:[]};var W=n("VU/8")(O,L,!1,function(e){n("mPCr")},"data-v-4217b0e6",null).exports,j={name:"newissue",components:{tagger:W},data:function(){return{renameTitle:"Issue",renameDescription:"Description",editingTitle:!1,editingDescription:!1,image:null,date:""}},props:["currentUser","closeIssue"],computed:{currDate:function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,i=e.getFullYear();return t<10&&(t="0"+t),n<10&&(n="0"+n),this.date=n+"/"+t+"/"+i,e=n+"/"+t+"/"+i}},firebase:{issueReference:u,tagReference:h,categoryReference:f},methods:{getTagsForIssue:function(){for(var e=this.tagReference.filter(function(e){return"temp"==e.owner}),t=[],n=0;n<e.length;n++){var i=this.categoryReference.filter(function(t){return t[".key"]==e[n].id});0!=i.length&&t.push(i[0].title)}return t},submit:function(){if("Issue"!=this.renameTitle&&"Description"!=this.renameDescription&&this.checkCategorySelected()){u.push({title:this.renameTitle,description:this.renameDescription,editingTitle:!1,editingDescription:!1,image:this.image,owner:this.currentUser,date:this.date,mostRecentUpdate:-1*Date.now(),showComments:!1,justSubmitted:!0,modal:!1});var e=this.issueReference.filter(function(e){return 1==e.justSubmitted});this.convertTemps(e[0][".key"]),u.child(e[0][".key"]).update({justSubmitted:!1}),this.closeIssue(),this.renameTitle="Issue",this.renameDescription="Description"}else alert("You didn't fill out all the required fields. Close the issue or fill out all required fields (title, description, and at least one tag)")},checkCategorySelected:function(){return 0!=this.tagReference.filter(function(e){return"temp"==e.owner}).length},convertTemps:function(e){this.tagReference.filter(function(e){return"temp"==e.owner}).forEach(function(t){return h.child(t[".key"]).update({owner:e})})},setEditTrue:function(e){"Title"==e?this.editingTitle=!0:"Description"==e&&(this.editingDescription=!0)},editTitle:function(){this.renameTitle=this.renameTitle.trim(),this.editingTitle=!1},editDescription:function(){this.renameDescription=this.renameDescription.trim(),this.editingDescription=!1},changeImage:function(){this.$refs.file.click()},addImage:function(e){var t=this,n=e.target.files;n&&(this.image=n[0],this.imagePath=this.image.name),c.child("images/"+this.imagePath).put(this.image).then(function(e){return t.updateImage(e.downloadURL)}),e.target.value=""},updateImage:function(e){this.image=e}}},V={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-flex",{attrs:{xs12:""}},[n("v-card",[n("v-toolbar",{attrs:{dark:"",dense:""}},[n("v-toolbar-title",[n("div",{staticClass:"headline"},[e.editingTitle?e._e():n("v-btn",{attrs:{icon:""},on:{click:function(t){e.setEditTrue("Title")}}},[n("v-icon",{attrs:{small:""}},[e._v("mode_edit")])],1),e._v(" "),e.editingTitle?n("v-text-field",{staticStyle:{display:"inline-block"},attrs:{name:"editIssueTitle",label:"Title issue"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.editTitle()}},model:{value:e.renameTitle,callback:function(t){e.renameTitle=t},expression:"renameTitle"}}):n("span",[e._v(e._s(e.renameTitle))])],1)]),e._v(" "),n("v-spacer"),e._v(" "),n("span",[e._v(e._s(e.currentUser)+"\n        "),n("v-chip",{attrs:{label:"",outline:""}},[e._v(e._s(e.currDate))])],1)],1),e._v(" "),n("v-container",{attrs:{fluid:"","grid-list-lg":""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs7:""}},[n("div",[e.editingDescription?e._e():n("v-btn",{attrs:{icon:""},on:{click:function(t){e.setEditTrue("Description")}}},[n("v-icon",{attrs:{small:""}},[e._v("mode_edit")])],1),e._v(" "),e.editingDescription?n("v-text-field",{staticStyle:{display:"inline-block"},attrs:{name:"editIssueDescription",label:"Add issue description"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.editDescription()}},model:{value:e.renameDescription,callback:function(t){e.renameDescription=t},expression:"renameDescription"}}):n("span",[e._v(e._s(e.renameDescription))])],1)]),e._v(" "),null!=e.image?n("v-flex",{attrs:{xs5:""}},[n("v-card-media",{attrs:{src:e.image,height:"125px",contain:""}})],1):e._e()],1),e._v(" "),n("v-divider",{attrs:{light:""}}),e._v(" "),e._l(e.getTagsForIssue(),function(t){return n("v-chip",{attrs:{outline:"",color:"black"}},[e._v("\n        "+e._s(t)+"\n      ")])}),e._v(" "),n("v-divider",{attrs:{light:""}}),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{icon:""},on:{click:function(t){e.closeIssue()}}},[n("v-icon",[e._v("delete")])],1),e._v(" "),n("v-btn",{attrs:{icon:""},nativeOn:{click:function(t){return e.changeImage(t)}}},[n("v-icon",[e._v("add_a_photo")])],1),e._v(" "),n("v-btn",{attrs:{flat:""},on:{click:function(t){e.submit()}}},[e._v("Submit")]),e._v(" "),n("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"images",name:"files[]"},on:{change:e.addImage}}),e._v(" "),n("tagger",{attrs:{newIssue:!0}})],1)],2)],1)],1)},staticRenderFns:[]};var M=n("VU/8")(j,V,!1,function(e){n("Gr3X")},"data-v-10b5eb66",null).exports,B={name:"issue",data:function(){return{renameTitle:"",renameDescription:"",image:null,imagePath:"",newComment:""}},props:["issue","currentUser"],firebase:{issueReference:u,commentReference:d,tagReference:h,likeReference:v,categoryReference:f,followReference:_,inboxReference:g,userReference:l},computed:{},components:{tagger:W},methods:{clickyBoy:function(e){e.modal=!0},isAdmin:function(e){return 1==this.userReference.filter(function(t){return t.name==e})[0].isAdmin?"primary":"grey lighten-2"},getAdminCol:function(e){return 1==this.userReference.filter(function(t){return t.name==e})[0].isAdmin},isAuthenticatedUser:function(){var e=this;return 0!=this.userReference.filter(function(t){return t.name==e.currentUser}).length},isFollowing:function(){var e=this;return 0!=this.followReference.filter(function(t){return t.follower==e.currentUser&&t.issue==e.issue[".key"]}).length},follow:function(){_.push({follower:this.currentUser,issue:this.issue[".key"]})},unfollow:function(){var e=this,t=this.followReference.filter(function(t){return t.follower==e.currentUser&&t.issue==e.issue[".key"]});_.child(t[0][".key"]).remove()},getTagsForIssue:function(){for(var e=this,t=this.tagReference.filter(function(t){return t.owner==e.issue[".key"]}),n=[],i=0;i<t.length;i++){var s=this.categoryReference.filter(function(e){return e[".key"]==t[i].id});0!=s.length&&n.push(s[0].title)}return n},likedByCurrUser:function(e){var t=this;return 0!=this.likeReference.filter(function(n){return n.id==e[".key"]&&n.liker==t.currentUser}).length},showCurrComments:function(){this.issue.showComments=!0},hideCurrComments:function(){this.issue.showComments=!1},getNumLikes:function(e){return this.likeReference.filter(function(t){return t.id==e[".key"]}).length},like:function(e){this.isAuthenticatedUser()?v.push({id:e[".key"],liker:this.currentUser}):alert("You must be an authenticated Duke user to complete this action.")},unlike:function(e){var t=this,n=this.likeReference.filter(function(n){return n.id==e[".key"]&&n.liker==t.currentUser});v.child(n[0][".key"]).remove()},addComment:function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,i=e.getFullYear();t<10&&(t="0"+t),n<10&&(n="0"+n),e=n+"/"+t+"/"+i,this.newComment=this.newComment.trim(),this.newComment&&(d.push({title:this.newComment,owner:this.currentUser,id:this.issue[".key"],date:e}),this.updateFollowers(),this.newComment="",u.child(this.issue[".key"]).update({mostRecentUpdate:-1*Date.now()}))},updateFollowers:function(){var e=this,t=new Date,n=t.getDate(),i=t.getMonth()+1,s=t.getFullYear();n<10&&(n="0"+n),i<10&&(i="0"+i),t=i+"/"+n+"/"+s,this.followReference.filter(function(t){return t.issue==e.issue[".key"]}).forEach(function(n){return e.singleUpdate(t,n)})},singleUpdate:function(e,t){g.push({title:"Comment added to issue: "+this.issue.title,comment:this.newComment,type:"Following",recipient:t.follower,commenter:this.currentUser,date:e})},cancelComment:function(){this.newComment=""},getComments:function(){var e=this;return this.commentReference.filter(function(t){return t.id==e.issue[".key"]})},removeComment:function(e){this.likeReference.filter(function(t){return t.id==e[".key"]}).forEach(function(e){return v.child(e[".key"]).remove()}),d.child(e[".key"]).remove()},setEditTrue:function(e){"Title"==e?u.child(this.issue[".key"]).update({editingTitle:!0}):"Description"==e&&u.child(this.issue[".key"]).update({editingDescription:!0})},closeIssue:function(){var e=this,t=this.commentReference.filter(function(t){return t.id==e.issue[".key"]});this.likeReference.filter(function(t){return t.id==e.issue[".key"]}).forEach(function(e){return v.child(e[".key"]).remove()}),t.forEach(function(t){return e.removeComment(t)}),u.child(this.issue[".key"]).remove(),this.tagReference.filter(function(t){return t.owner==e.issue[".key"]}).forEach(function(e){return h.child(e[".key"]).remove()})},editTitle:function(){this.renameTitle=this.renameTitle.trim(),this.renameTitle&&u.child(this.issue[".key"]).update({title:this.renameTitle,editingTitle:!1})},editDescription:function(){this.renameDescription=this.renameDescription.trim(),this.renameDescription&&u.child(this.issue[".key"]).update({description:this.renameDescription,editingDescription:!1})},changeImage:function(){this.$refs.fileNew.click()},addImage:function(e){var t=this,n=e.target.files;n&&(this.image=n[0],this.imagePath=this.image.name),c.child("images/"+this.imagePath).put(this.image).then(function(e){return t.updateImage(e.downloadURL)}),e.target.value=""},updateImage:function(e){u.child(this.issue[".key"]).update({image:e})}}},Y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-flex",{attrs:{xs12:""}},[n("v-card",{staticClass:"white--text",attrs:{color:"cyan darken-2"}},[n("v-toolbar",{attrs:{dark:"",dense:""}},[n("v-toolbar-title",[n("div",{staticClass:"headline"},[e.issue.owner!=e.currentUser||e.issue.editingTitle?e._e():n("v-btn",{attrs:{icon:""},on:{click:function(t){e.setEditTrue("Title")}}},[n("v-icon",{attrs:{small:""}},[e._v("mode_edit")])],1),e._v(" "),e.issue.editingTitle?n("v-text-field",{staticStyle:{display:"inline-block"},attrs:{name:"editIssueTitle",label:"Rename issue"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.editTitle()}},model:{value:e.renameTitle,callback:function(t){e.renameTitle=t},expression:"renameTitle"}}):n("span",[e._v(e._s(e.issue.title))])],1)]),e._v(" "),n("v-spacer"),e._v(" "),n("span",[e._v(e._s(e.issue.owner)+"\n        "),n("v-chip",{attrs:{label:"",outline:""}},[e._v(e._s(e.issue.date))])],1)],1),e._v(" "),n("v-container",{attrs:{fluid:"","grid-list-lg":""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs7:""}},[n("div",[n("div",[e.issue.owner!=e.currentUser||e.issue.editingDescription?e._e():n("v-btn",{attrs:{icon:""},on:{click:function(t){e.setEditTrue("Description")}}},[n("v-icon",{attrs:{small:""}},[e._v("mode_edit")])],1),e._v(" "),e.issue.editingDescription?n("v-text-field",{staticStyle:{display:"inline-block"},attrs:{name:"editIssueDescription",label:"Rename issue description"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.editDescription()}},model:{value:e.renameDescription,callback:function(t){e.renameDescription=t},expression:"renameDescription"}}):n("span",[e._v(e._s(e.issue.description))])],1)])]),e._v(" "),e.issue.image?n("v-flex",{attrs:{xs5:""}},[n("v-card-media",{attrs:{src:e.issue.image,height:"125px",contain:""},nativeOn:{click:function(t){e.clickyBoy(e.issue)}}}),e._v(" "),n("v-dialog",{model:{value:e.issue.modal,callback:function(t){e.$set(e.issue,"modal",t)},expression:"issue.modal"}},[n("v-card",[n("v-card-text",[n("v-card-media",{attrs:{src:e.issue.image,height:"300px",contain:""}})],1)],1)],1)],1):e._e()],1),e._v(" "),n("v-divider",{attrs:{light:""}}),e._v(" "),e._l(e.getTagsForIssue(),function(t){return n("v-chip",{attrs:{outline:"",color:"black"}},[e._v("\n        "+e._s(t)+"\n      ")])}),e._v(" "),n("v-divider",{attrs:{light:""}}),e._v(" "),n("v-card-actions",[e.issue.showComments?e._e():n("v-btn",{attrs:{icon:"",color:"white"},on:{click:function(t){e.showCurrComments()}}},[n("v-icon",[e._v("expand_more")])],1),e._v(" "),e.issue.showComments?n("v-btn",{attrs:{icon:"",color:"white"},on:{click:function(t){e.hideCurrComments()}}},[n("v-icon",[e._v("expand_less")])],1):e._e(),e._v(" "),e.issue.owner==e.currentUser?n("v-btn",{attrs:{icon:""},on:{click:function(t){e.closeIssue()}}},[n("v-icon",[e._v("delete")])],1):e._e(),e._v(" "),e.issue.owner==e.currentUser?n("v-btn",{attrs:{icon:""},nativeOn:{click:function(t){return e.changeImage(t)}}},[n("v-icon",[e._v("add_a_photo")])],1):e._e(),e._v(" "),n("input",{ref:"fileNew",staticStyle:{display:"none"},attrs:{type:"file",id:"images",name:"files[]"},on:{change:e.addImage}}),e._v(" "),e.issue.owner==e.currentUser?n("tagger",{attrs:{issueProp:e.issue,newIssue:!1}}):e._e(),e._v(" "),!e.isFollowing()&&e.isAuthenticatedUser()?n("v-btn",{attrs:{dark:""},on:{click:function(t){e.follow()}}},[e._v("Follow")]):e._e(),e._v(" "),e.isFollowing()&&e.isAuthenticatedUser()?n("v-btn",{attrs:{dark:""},on:{click:function(t){e.unfollow()}}},[e._v("Unfollow")]):e._e(),e._v(" "),n("v-spacer"),e._v(" "),n("span",[e._v(e._s(e.getNumLikes(e.issue)))]),e._v(" "),e.likedByCurrUser(e.issue)?n("v-btn",{attrs:{flat:"",icon:"",color:"red darken-2"},on:{click:function(t){e.unlike(e.issue)}}},[n("v-icon",{attrs:{small:""}},[e._v("thumb_up")])],1):e._e(),e._v(" "),e.likedByCurrUser(e.issue)?e._e():n("v-btn",{attrs:{flat:"",icon:""},on:{click:function(t){e.like(e.issue)}}},[n("v-icon",{attrs:{small:""}},[e._v("thumb_up")])],1)],1)],2),e._v(" "),e.issue.showComments?n("div",[e._l(e.getComments(),function(t){return n("v-card",[n("v-toolbar",{attrs:{color:e.isAdmin(t.owner),dark:e.getAdminCol(t.owner),dense:""}},[n("v-toolbar-title",[e._v("\n            "+e._s(t.owner)+" ("+e._s(t.date)+")\n          ")]),e._v(" "),n("v-spacer"),e._v(" "),n("span",[e._v(e._s(e.getNumLikes(t)))]),e._v(" "),e.likedByCurrUser(t)?n("v-btn",{attrs:{flat:"",icon:"",color:"red darken-2"},on:{click:function(n){e.unlike(t)}}},[n("v-icon",{attrs:{small:""}},[e._v("thumb_up")])],1):e._e(),e._v(" "),e.likedByCurrUser(t)?e._e():n("v-btn",{attrs:{flat:"",icon:""},on:{click:function(n){e.like(t)}}},[n("v-icon",{attrs:{small:""}},[e._v("thumb_up")])],1),e._v(" "),e.currentUser==t.owner?n("v-btn",{attrs:{icon:""},on:{click:function(n){e.removeComment(t)}}},[n("v-icon",[e._v("delete")])],1):e._e()],1),e._v(" "),n("v-card-text",[e._v("\n          "+e._s(t.title)+"\n        ")])],1)}),e._v(" "),n("v-divider"),e._v(" "),e.isAuthenticatedUser()?n("v-card",[n("v-text-field",{staticStyle:{display:"inline-block"},attrs:{textarea:"",name:"addingComment",label:"Add a comment"},model:{value:e.newComment,callback:function(t){e.newComment=t},expression:"newComment"}}),e._v(" "),n("v-card-text",[n("v-card-actions",[n("v-btn",{staticClass:"alignSemiRight",attrs:{dark:""},on:{click:function(t){e.cancelComment()}}},[e._v("Cancel")]),e._v(" "),n("v-btn",{staticClass:"alignRight",attrs:{dark:""},on:{click:function(t){e.addComment()}}},[e._v("Post")])],1)],1)],1):e._e()],2):e._e()],1)],1)},staticRenderFns:[]};var $=n("VU/8")(B,Y,!1,function(e){n("ARFb")},"data-v-6ffe3564",null).exports,H={data:function(){return{user:null,addingIssue:!1,cat:"All",dateFilter:"",showDatePicker:!1}},props:["person"],firebase:{issueReference:u.orderByChild("mostRecentUpdate"),tagReference:h,categoryReference:f,userReference:l},components:{issue:$,newissue:M},methods:{isAuthenticatedUser:function(){var e=this;return 0!=this.userReference.filter(function(t){return t.name==e.person.name}).length},removeDatePicker:function(){this.cat="All"},selectedOrNot:function(e){return this.cat==e||this.cat.title==e?"lightgrey":"white"},getCurrCatTitle:function(){return"All"==this.cat?"All":"Filter by date"==this.cat?""==this.dateFilter?"date not selected":"Created "+this.dateFilter:this.cat.title},setFilter:function(e){this.cat=e},filterByDate:function(){var e=this.dateFilter.split("-"),t=e[1]+"/"+e[2]+"/"+e[0],n=this.issueReference.filter(function(e){return e.date==t});return n},filterIssueByCat:function(){var e=this;return"All"==this.cat?(this.dateFilter="",this.showDatePicker=!1,this.issueReference):"Filter by date"==this.cat?(this.showDatePicker=!0,this.filterByDate()):(this.dateFilter="",this.showDatePicker=!1,this.issueReference.filter(function(t){return e.issueIsTaggedBy(t,e.cat)}))},issueIsTaggedBy:function(e,t){return 0!=this.tagReference.filter(function(n){return n.id==t[".key"]&&n.owner==e[".key"]}).length},closeAddIssue:function(){this.addingIssue=!1,this.deleteAllTemps()},deleteAllTemps:function(){this.tagReference.filter(function(e){return"temp"==e.owner}).forEach(function(e){return h.child(e[".key"]).remove()})},openAddIssue:function(){this.addingIssue=!0},getUser:function(){return this.user},setUser:function(e){this.user=e}},name:"issue-view"},z={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[e.person?n("v-card",[n("v-container",{staticStyle:{"min-height":"0"},attrs:{fluid:"","grid-list-lg":""}},[!e.addingIssue&&e.isAuthenticatedUser()?n("v-btn",{attrs:{icon:""},on:{click:function(t){e.openAddIssue()}}},[n("i",{staticClass:"material-icons"},[e._v("add")])]):e._e(),e._v(" "),n("v-menu",{attrs:{"offset-y":""}},[n("v-btn",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[e._v("Showing: "+e._s(e.getCurrCatTitle()))]),e._v(" "),n("v-list",[n("v-list-tile",{style:{background:e.selectedOrNot("All")},on:{click:function(t){e.setFilter("All")}}},[n("v-list-tile-title",[e._v("All")])],1),e._v(" "),n("v-list-tile",{style:{background:e.selectedOrNot("Filter by date")},on:{click:function(t){e.setFilter("Filter by date")}}},[n("v-list-tile-title",[e._v("Filter by date")])],1),e._v(" "),e._l(e.categoryReference,function(t){return n("v-list-tile",{key:t.title,style:{background:e.selectedOrNot(t.title)},on:{click:function(n){e.setFilter(t)}}},[n("v-list-tile-title",[e._v(e._s(t.title))])],1)})],2)],1),e._v(" "),e.showDatePicker?n("span",[n("v-chip",{attrs:{small:"",disabled:"",outline:""}},[n("v-avatar",{attrs:{large:""}},[n("v-menu",{attrs:{"allow-overflow":"","full-width":""}},[n("v-btn",{attrs:{slot:"activator",icon:"",small:""},slot:"activator"},[n("v-icon",{attrs:{small:""}},[e._v("date_range")])],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-date-picker",{model:{value:e.dateFilter,callback:function(t){e.dateFilter=t},expression:"dateFilter"}})],1)],1)],1),e._v("\n          "+e._s(e.dateFilter)+"\n        ")],1),e._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(t){e.removeDatePicker()}}},[n("v-icon",{attrs:{small:""}},[e._v("close")])],1)],1):e._e(),e._v(" "),n("v-layout",{attrs:{row:"",wrap:""}},[e.addingIssue?n("newissue",{attrs:{currentUser:e.person.name,closeIssue:e.closeAddIssue}}):e._e(),e._v(" "),e._l(e.filterIssueByCat(),function(t){return n("issue",{attrs:{issue:t,currentUser:e.person.name}})})],2)],1)],1):e._e()],1)},staticRenderFns:[]},G=n("VU/8")(H,z,!1,null,null,null).exports,K=n("+4/V"),X=n.n(K),Q={data:function(){return{contactList:X.a}}},J={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"compPadding"},[n("h1",[e._v("Duke Facility Contact Information")]),e._v(" "),n("hr"),e._v(" "),n("v-container",{attrs:{"grid-list-xl":""}},[n("v-layout",{attrs:{column:""}},e._l(e.contactList,function(t){return n("v-flex",[n("v-card",{attrs:{dark:""}},[n("v-toolbar",[n("v-toolbar-title",[e._v("\n              "+e._s(t.Department)+"\n            ")])],1),e._v(" "),n("v-card-text",[e._v("\n            Email : "+e._s(t.Email)+"\n          ")]),e._v(" "),n("v-card-text",[e._v("\n            Phone Number : "+e._s(t.Phone)+"\n          ")]),e._v(" "),n("v-card-text",[n("a",{attrs:{href:t.Website}},[e._v("Website")])])],1)],1)}))],1)],1)},staticRenderFns:[]};var Z=n("VU/8")(Q,J,!1,function(e){n("X671")},"data-v-be52057a",null).exports,ee={name:"requestadmin",firebase:{adminRequestReference:p,inboxReference:g},props:["user"],data:function(){return{newReason:"",dialog:!1}},methods:{addNewRequest:function(){if(this.newReason=this.newReason.trim(),this.newReason){p.push({user:this.user,reasoning:this.newReason}),this.dialog=!1;var e=new Date,t=e.getDate(),n=e.getMonth()+1,i=e.getFullYear();t<10&&(t="0"+t),n<10&&(n="0"+n),e=n+"/"+t+"/"+i,g.push({title:"Pending request: become site administrator",type:"admin",op:this.user,date:e})}else alert("You need to submit a reason with your request to be an administrator.")},closeRequest:function(){this.newReason="",this.dialog=!1}}},te={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-btn",{attrs:{dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("Request to become a site administrator")]),e._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Request to become an administrator")]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",{staticStyle:{height:"300px"}},[n("v-text-field",{staticStyle:{display:"inline-block"},attrs:{textarea:"",name:"addReasoning",label:"Why do you want to become a site administrator?"},model:{value:e.newReason,callback:function(t){e.newReason=t},expression:"newReason"}})],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"green darken-1",flat:""},nativeOn:{click:function(t){e.closeRequest()}}},[e._v("Close request")]),e._v(" "),n("v-btn",{attrs:{color:"green darken-1",flat:""},nativeOn:{click:function(t){e.addNewRequest()}}},[e._v("Submit")])],1)],1)],1)],1)},staticRenderFns:[]};var ne=n("VU/8")(ee,te,!1,function(e){n("8++V")},"data-v-a023cd68",null).exports,ie={name:"categoryrequest",firebase:{catRequestReference:m,inboxReference:g},data:function(){return{dialog:!1,newTag:"",newDescription:""}},props:["user"],methods:{closeRequest:function(){this.newTag="",this.newDescription="",this.dialog=!1},addNewPotentialTag:function(){if(this.newTag=this.newTag.trim(),this.newDescription=this.newDescription.trim(),this.newTag&&this.newDescription){m.push({title:this.newTag,description:this.newDescription}),this.dialog=!1;var e=new Date,t=e.getDate(),n=e.getMonth()+1,i=e.getFullYear();t<10&&(t="0"+t),n<10&&(n="0"+n),e=n+"/"+t+"/"+i,g.push({title:"Pending request: add tag category "+this.newTag,type:"category",cat:this.newTag,op:this.user,date:e})}else alert("Please fill out both the new tag title and description before submitting, or close the request.");this.newTag="",this.newDescription=""}}},se={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-btn",{attrs:{dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("Request tag category")]),e._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Request to add tag category")]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",{staticStyle:{height:"300px"}},[n("v-text-field",{staticStyle:{display:"inline-block"},attrs:{name:"createTag",label:"Tag name"},model:{value:e.newTag,callback:function(t){e.newTag=t},expression:"newTag"}}),e._v(" "),n("v-text-field",{staticStyle:{display:"inline-block"},attrs:{textarea:"",name:"addDescription",label:"Describe the suggested new category"},model:{value:e.newDescription,callback:function(t){e.newDescription=t},expression:"newDescription"}})],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"green darken-1",flat:""},nativeOn:{click:function(t){e.closeRequest()}}},[e._v("Close request")]),e._v(" "),n("v-btn",{attrs:{color:"green darken-1",flat:""},nativeOn:{click:function(t){e.addNewPotentialTag()}}},[e._v("Submit")])],1)],1)],1)],1)},staticRenderFns:[]};var re={name:"services",props:["person"],components:{requestadmin:ne,categoryrequest:n("VU/8")(ie,se,!1,function(e){n("pcGT")},"data-v-3e8c261a",null).exports}},ae={render:function(){var e=this.$createElement,t=this._self._c||e;return this.person?t("div",[t("requestadmin",{attrs:{user:this.person.name}}),this._v(" "),t("categoryrequest",{attrs:{user:this.person.name}}),this._v(" "),t("v-layout",{attrs:{row:"","justify-center":""}},[t("v-btn",{attrs:{dark:"",href:"https://fixmycampus-78290.firebaseio.com/.json",target:"_blank"}},[this._v("Data")])],1)],1):this._e()},staticRenderFns:[]};var oe=n("VU/8")(re,ae,!1,function(e){n("v0hK")},"data-v-d0c640a0",null).exports,ce={name:"inbox",firebase:{adminRequestReference:p,catRequestReference:m,categoryReference:f,inboxReference:g,userReference:l},data:function(){return{catDialog:!1,adminDialog:!1,currCatRequest:null,currAdminRequest:null}},props:["person"],methods:{getColor:function(e){return"decision"==e.type.toLowerCase()?"red lighten-3":"following"==e.type.toLowerCase()?"teal lighten-3":"category"==e.type.toLowerCase()?"green lighten-3":"admin"==e.type.toLowerCase()?"orange lighten-3":void 0},removeMsg:function(e){g.child(e[".key"]).remove()},getRequestUpdates:function(){var e=this,t=this.inboxReference.filter(function(e){return"following"!=e.type.toLowerCase()&&"decision"!=e.type.toLowerCase()});return 1==this.userReference.filter(function(t){return t.name==e.person.name})[0].isAdmin?t:[]},getDecisions:function(){var e=this;return this.inboxReference.filter(function(t){return"decision"==t.type.toLowerCase()&&t.op==e.person.name})},getFollowUpdates:function(){var e=this;return this.inboxReference.filter(function(e){return"following"==e.type.toLowerCase()}).filter(function(t){return t.recipient==e.person.name})},resolve:function(e){"category"==e.type?this.setCurrCatRequest(e):"admin"==e.type&&(this.currAdminRequest=e,this.adminDialog=!0)},setCurrCatRequest:function(e){this.currCatRequest=e,this.catDialog=!0},getCatRequestDesc:function(){var e=this;return this.catRequestReference.filter(function(t){return t.title==e.currCatRequest.cat})[0].description},getAdminRequestReason:function(e){return this.adminRequestReference.filter(function(t){return t.user==e})[0].reasoning},resolveAdminAdd:function(e,t){var n=this,i=new Date,s=i.getDate(),r=i.getMonth()+1,a=i.getFullYear();if(s<10&&(s="0"+s),r<10&&(r="0"+r),i=r+"/"+s+"/"+a,"approve"==t){var o=this.userReference.filter(function(t){return t.name==e.op});l.child(o[0][".key"]).update({isAdmin:!0}),g.push({title:"Approved request: admin permissions for "+e.op,type:"decision",admin:this.person.name,op:e.op,date:i})}else"reject"==t&&g.push({title:"Rejected request: admin permissions for "+e.op,type:"decision",admin:this.person.name,op:e.op,date:i});var c=this.adminRequestReference.filter(function(t){return t.user==e.op&&t.reasoning==n.getAdminRequestReason(e.op)});p.child(c[0][".key"]).remove(),g.child(e[".key"]).remove(),this.catDialog=!1,this.currAdminRequest=null},resolveCatAdd:function(e,t){var n=new Date,i=n.getDate(),s=n.getMonth()+1,r=n.getFullYear();if(i<10&&(i="0"+i),s<10&&(s="0"+s),n=s+"/"+i+"/"+r,"approve"==t){var a=this.catRequestReference.filter(function(t){return t.title==e.cat})[0].description;f.push({title:e.cat,desc:a}),g.push({title:"Approved request: add tag category "+e.cat,type:"decision",admin:this.person.name,op:e.op,date:n})}else"reject"==t&&g.push({title:"Rejected request: add tag category "+e.cat,type:"decision",admin:this.person.name,op:e.op,date:n});var o=this.catRequestReference.filter(function(t){return t.title==e.cat});m.child(o[0][".key"]).remove(),g.child(e[".key"]).remove(),this.adminDialog=!1,this.currCatRequest=null}}},le={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.person?n("v-card",[n("v-container",{staticStyle:{"min-height":"0"},attrs:{fluid:"","grid-list-lg":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[e._l(e.getRequestUpdates(),function(t){return n("v-flex",{attrs:{xs12:"",sm12:"",md4:""}},[n("v-card",[n("v-toolbar",{attrs:{color:e.getColor(t),dense:""}},[n("v-toolbar-title",[e._v("\n              "+e._s(t.op)+" ("+e._s(t.date)+")\n            ")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{on:{click:function(n){e.resolve(t)}}},[e._v("Resolve")])],1),e._v(" "),n("v-card-text",[e._v("\n            "+e._s(t.title)+"\n          ")]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-chip",[e._v(e._s(t.type))])],1)],1)],1)}),e._v(" "),e._l(e.getFollowUpdates(),function(t){return n("v-flex",{attrs:{xs12:"",sm12:"",md4:""}},[n("v-card",[n("v-toolbar",{attrs:{color:e.getColor(t),dense:""}},[n("v-toolbar-title",[e._v("\n              "+e._s(t.commenter)+" ("+e._s(t.date)+")\n            ")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(n){e.removeMsg(t)}}},[n("v-icon",[e._v("close")])],1)],1),e._v(" "),n("v-card-text",[e._v("\n            "+e._s(t.title)+"\n          ")]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",[e._v("\n            "+e._s(t.comment)+"\n          ")]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-chip",[e._v(e._s(t.type))])],1)],1)],1)}),e._v(" "),e._l(e.getDecisions(),function(t){return n("v-flex",{attrs:{xs12:"",sm12:"",md4:""}},[n("v-card",[n("v-toolbar",{attrs:{color:e.getColor(t),dense:""}},[n("v-toolbar-title",[e._v("\n              "+e._s(t.admin)+" ("+e._s(t.date)+")\n            ")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(n){e.removeMsg(t)}}},[n("v-icon",[e._v("close")])],1)],1),e._v(" "),n("v-card-text",[e._v("\n            "+e._s(t.title)+"\n          ")]),e._v(" "),n("v-divider"),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-chip",[e._v(e._s(t.type))])],1)],1)],1)})],2)],1),e._v(" "),e.currCatRequest?n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:e.catDialog,callback:function(t){e.catDialog=t},expression:"catDialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Approve or deny request to add tag category")]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",[n("h3",{staticClass:"headline mb-0"},[e._v("Name: "+e._s(e.currCatRequest.cat))]),e._v(" "),n("div",[e._v("Description: "+e._s(e.getCatRequestDesc()))])]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"green darken-1",flat:""},nativeOn:{click:function(t){e.resolveCatAdd(e.currCatRequest,"approve")}}},[e._v("Approve")]),e._v(" "),n("v-btn",{attrs:{color:"green darken-1",flat:""},nativeOn:{click:function(t){e.resolveCatAdd(e.currCatRequest,"reject")}}},[e._v("Reject")])],1)],1)],1)],1):e._e(),e._v(" "),e.currAdminRequest?n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:e.adminDialog,callback:function(t){e.adminDialog=t},expression:"adminDialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Approve or deny request to become admin")]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",[n("h3",{staticClass:"headline mb-0"},[e._v("Name: "+e._s(e.currAdminRequest.op))]),e._v(" "),n("div",[e._v("Reasoning: "+e._s(e.getAdminRequestReason(e.currAdminRequest.op)))])]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"green darken-1",flat:""},nativeOn:{click:function(t){e.resolveAdminAdd(e.currAdminRequest,"approve")}}},[e._v("Approve")]),e._v(" "),n("v-btn",{attrs:{color:"green darken-1",flat:""},nativeOn:{click:function(t){e.resolveAdminAdd(e.currAdminRequest,"reject")}}},[e._v("Reject")])],1)],1)],1)],1):e._e()],1):e._e()},staticRenderFns:[]};var ue,de=n("VU/8")(ce,le,!1,function(e){n("YTlj")},"data-v-00c75d16",null).exports,ve=(ue={data:function(){return{newTitle:"New announcement",newDescription:"Description",editingTitle:!1,editingDescription:!1,showNewAnnouncement:!1}},props:["person"],methods:{getDate:function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,i=e.getFullYear();return t<10&&(t="0"+t),n<10&&(n="0"+n),e=n+"/"+t+"/"+i},editTitle:function(){this.newTitle=this.newTitle.trim(),this.editingTitle=!1},editDescription:function(){this.newDescription=this.newDescription.trim(),this.editingDescription=!1},postAnnouncement:function(){this.newTitle=this.newTitle.trim(),this.newDescription=this.newDescription.trim(),"New announcement"!=this.newTitle&&"Description"!=this.newDescription?(k.push({title:this.newTitle,description:this.newDescription,date:this.getDate(),admin:this.person.name}),this.showNewAnnouncement=!1,this.newTitle="New announcement",this.newDescription="Description"):alert("Please fill in a title and description before posting, or close the announcement.")},closePost:function(){this.newTitle="New announcement",this.newDescription="Description",this.showNewAnnouncement=!1},deleteAnnounce:function(e){k.child(e[".key"]).remove()},isUserAdmin:function(){var e=this,t=this.userReference.filter(function(t){return t.name==e.person.name});return 0!=t.length&&t[0].isAdmin}}},N()(ue,"props",["person"]),N()(ue,"firebase",{announcementReference:k,userReference:l}),ue),he={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticStyle:{"min-height":"0"},attrs:{fluid:"","grid-list-lg":""}},[e.isUserAdmin()&&!e.showNewAnnouncement?n("v-btn",{attrs:{icon:""},on:{click:function(t){e.showNewAnnouncement=!0}}},[n("i",{staticClass:"material-icons"},[e._v("add")])]):e._e(),e._v(" "),e.showNewAnnouncement?n("v-flex",{attrs:{xs12:""}},[n("v-card",[n("v-toolbar",{attrs:{dark:"",dense:""}},[e.editingTitle?e._e():n("v-btn",{attrs:{icon:""},on:{click:function(t){e.editingTitle=!0}}},[n("v-icon",{attrs:{small:""}},[e._v("mode_edit")])],1),e._v(" "),e.editingTitle?n("v-text-field",{staticStyle:{display:"inline-block"},attrs:{name:"editingTitle",label:"Title announcement"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.editTitle()}},model:{value:e.newTitle,callback:function(t){e.newTitle=t},expression:"newTitle"}}):e._e(),e._v(" "),e.editingTitle?e._e():n("v-toolbar-title",[e._v("\n          "+e._s(e.newTitle)+"\n        ")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-chip",{attrs:{outline:"",label:""}},[e._v("("+e._s(e.getDate())+")")])],1),e._v(" "),n("v-card-text",[e.editingDescription?e._e():n("v-btn",{attrs:{icon:""},on:{click:function(t){e.editingDescription=!0}}},[n("v-icon",{attrs:{small:""}},[e._v("mode_edit")])],1),e._v(" "),e.editingDescription?n("v-text-field",{staticStyle:{display:"inline-block"},attrs:{textarea:"",name:"editingDescription",label:"Edit announcement description"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.editDescription()}},model:{value:e.newDescription,callback:function(t){e.newDescription=t},expression:"newDescription"}}):n("span",[e._v(e._s(e.newDescription))])],1),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{dark:""},on:{click:function(t){e.closePost()}}},[e._v("Close")]),e._v(" "),n("v-btn",{attrs:{dark:""},on:{click:e.postAnnouncement}},[e._v("Post")])],1)],1)],1):e._e(),e._v(" "),n("v-divider"),e._v(" "),e.person?n("v-container",{staticStyle:{"min-height":"0"},attrs:{fluid:"","grid-list-lg":""}},[n("v-layout",{attrs:{row:"",wrap:""}},e._l(e.announcementReference,function(t){return n("v-flex",{attrs:{xs12:""}},[n("v-card",{staticClass:"white--text",attrs:{color:"cyan darken-2"}},[n("v-toolbar",{attrs:{dark:"",dense:""}},[n("v-toolbar-title",[e._v("\n              "+e._s(t.title)+"\n            ")]),e._v(" "),n("v-spacer"),e._v("\n            "+e._s(t.admin)+"\n            "),n("v-chip",{attrs:{outline:"",label:""}},[e._v("("+e._s(t.date)+")")])],1),e._v(" "),n("v-card-text",[e._v("\n            "+e._s(t.description)+"\n          ")]),e._v(" "),n("v-divider"),e._v(" "),e.isUserAdmin()?n("v-card-actions",[n("v-btn",{attrs:{icon:""},on:{click:function(n){e.deleteAnnounce(t)}}},[n("v-icon",[e._v("delete")])],1)],1):e._e()],1)],1)}))],1):e._e()],1)},staticRenderFns:[]};var fe=n("VU/8")(ve,he,!1,function(e){n("eaVP")},null,null).exports;i.a.use(F.a);var me=new F.a({routes:[{path:"/",name:"Home",component:P},{path:"/issues",name:"Issues",component:G},{path:"/contact",name:"Contacts",component:Z},{path:"/services",name:"Services",component:oe},{path:"/inbox",name:"Inbox",component:de},{path:"/updates",name:"Announcements",component:fe}]}),pe=n("3EgV"),ge=n.n(pe),_e=n("1mcD"),ke=n.n(_e);n("7zck"),n("EmOQ");i.a.use(ke.a),i.a.use(ge.a),i.a.config.productionTip=!1,new i.a({el:"#app",router:me,components:{App:q},template:"<App/>"})},X671:function(e,t){},YTlj:function(e,t){},YYMA:function(e,t){},eaVP:function(e,t){},mPCr:function(e,t){},pcGT:function(e,t){},v0hK:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.d84ebd17a98b0aaf331f.js.map